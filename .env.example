# ============================================
# üîê ENVIRONMENT CONFIGURATION
# ============================================
# ‚ö†Ô∏è NEVER commit the actual .env file to Git!
# Copy this to .env and fill with real values

# ============================================
# DATABASE CONFIGURATION
# ============================================
# PostgreSQL Connection String
# Format: postgresql://USER:PASSWORD@HOST:PORT/DATABASE?schema=public&sslmode=require&connection_limit=10

# Development (Local Docker)
DATABASE_URL="postgresql://postgres:postgres@localhost:5432/chatbot_dev?schema=public"

# Production (Example - Use strong credentials!)
# DATABASE_URL="postgresql://app_user:STRONG_RANDOM_32_CHAR_PASSWORD@your-db-host.com:5432/chatbot_prod?schema=public&sslmode=require&connection_limit=10"

# Separate credentials for better security
POSTGRES_HOST=localhost
POSTGRES_PORT=5432
POSTGRES_USER=postgres
POSTGRES_PASSWORD=postgres
POSTGRES_DB=chatbot_dev

# ============================================
# AI SERVICE CONFIGURATION
# ============================================
# Groq API Key - Get from https://console.groq.com/keys
GROQ_API_KEY=your_groq_api_key_here

# AI Model Configuration
GROQ_MODEL=llama-3.3-70b-versatile
GROQ_TEMPERATURE=0.7
GROQ_MAX_TOKENS=2048

# ============================================
# REDIS CONFIGURATION
# ============================================
# Redis Connection (for caching & job queue)
REDIS_URL=redis://localhost:6379/0
REDIS_HOST=localhost
REDIS_PORT=6379
REDIS_PASSWORD=
REDIS_DB=0

# Cache TTL (Time To Live) in seconds
CACHE_TTL_PRODUCTS=3600      # 1 hour
CACHE_TTL_PRICES=1800        # 30 minutes
CACHE_TTL_SEARCH=600         # 10 minutes

# ============================================
# SECURITY CONFIGURATION
# ============================================
# JWT Secret Key (Generate with: openssl rand -hex 32)
JWT_SECRET_KEY=your_jwt_secret_key_min_32_chars_random

# JWT Configuration
JWT_ALGORITHM=HS256
JWT_ACCESS_TOKEN_EXPIRE_MINUTES=30
JWT_REFRESH_TOKEN_EXPIRE_DAYS=7

# API Rate Limiting
RATE_LIMIT_PER_MINUTE=20
RATE_LIMIT_PER_HOUR=500
RATE_LIMIT_ENABLED=true

# CORS Configuration (comma-separated origins)
ALLOWED_ORIGINS=http://localhost:4000,http://localhost:3000
ALLOWED_ORIGINS_REGEX=^https://.*\.yourdomain\.com$

# ============================================
# NEXTAUTH CONFIGURATION (Frontend)
# ============================================
# NextAuth Secret (Generate with: openssl rand -base64 32)
NEXTAUTH_SECRET=your_nextauth_secret_key_here
NEXTAUTH_URL=http://localhost:4000

# OAuth Providers
GITHUB_CLIENT_ID=your_github_oauth_client_id
GITHUB_CLIENT_SECRET=your_github_oauth_client_secret

GOOGLE_CLIENT_ID=your_google_oauth_client_id
GOOGLE_CLIENT_SECRET=your_google_oauth_client_secret

# ============================================
# STRIPE CONFIGURATION (Payments)
# ============================================
# Get from https://dashboard.stripe.com/apikeys
STRIPE_SECRET_KEY=sk_test_your_stripe_secret_key
STRIPE_PUBLISHABLE_KEY=pk_test_your_stripe_publishable_key
STRIPE_WEBHOOK_SECRET=whsec_your_webhook_secret

# Price IDs for subscription tiers
STRIPE_PRICE_ID_PRO=price_pro_monthly_id
STRIPE_PRICE_ID_BUSINESS=price_business_monthly_id

# ============================================
# SCRAPING CONFIGURATION
# ============================================
# User-Agent Rotation (for anti-detection)
USE_ROTATING_USER_AGENTS=true
SCRAPER_TIMEOUT_MS=30000
SCRAPER_MAX_RETRIES=3

# Proxy Configuration (Optional - for production)
USE_PROXY=false
PROXY_URL=http://proxy-provider.com:8080
PROXY_USERNAME=
PROXY_PASSWORD=

# Store-specific settings
AMAZON_DOMAIN=amazon.de
THOMANN_DOMAIN=thomann.de
MEDIAMARKT_DOMAIN=mediamarkt.de

# ============================================
# MONITORING & LOGGING
# ============================================
# Sentry Error Tracking
SENTRY_DSN=https://your_sentry_dsn@sentry.io/project_id
SENTRY_ENVIRONMENT=development
SENTRY_TRACES_SAMPLE_RATE=0.1

# Logging Level (DEBUG, INFO, WARNING, ERROR, CRITICAL)
LOG_LEVEL=INFO
LOG_FORMAT=json  # or 'text'

# ============================================
# EMAIL CONFIGURATION (Price Alerts)
# ============================================
# SMTP Settings
SMTP_HOST=smtp.gmail.com
SMTP_PORT=587
SMTP_USER=your_email@gmail.com
SMTP_PASSWORD=your_app_specific_password
SMTP_FROM=noreply@yourdomain.com

# SendGrid Alternative
SENDGRID_API_KEY=your_sendgrid_api_key

# ============================================
# BACKGROUND JOBS CONFIGURATION
# ============================================
# BullMQ Job Queue Settings
JOB_QUEUE_SCRAPER_INTERVAL_HOURS=6
JOB_QUEUE_PRICE_UPDATE_INTERVAL_HOURS=2
JOB_QUEUE_CLEANUP_OLD_PRICES_DAYS=30

# ============================================
# FEATURE FLAGS
# ============================================
ENABLE_SCRAPING=true
ENABLE_PRICE_ALERTS=false
ENABLE_CONVERSATION_HISTORY=true
ENABLE_AFFILIATE_LINKS=false

# ============================================
# APPLICATION CONFIGURATION
# ============================================
# Node Environment
NODE_ENV=development

# API URLs
NEXT_PUBLIC_API_URL=http://localhost:8001
NEXT_PUBLIC_FRONTEND_URL=http://localhost:4000

# Port Configuration
WEB_PORT=4000
API_PORT=8001

# ============================================
# SECURITY NOTES
# ============================================
# 1. Use strong passwords (32+ chars, random)
# 2. Always use SSL/TLS in production
# 3. Rotate credentials every 90 days
# 4. Use different DB users for different services
# 5. Enable PostgreSQL audit logging
# 6. Never use default passwords in production
# 7. Store secrets in secure vault (AWS Secrets Manager, Vault)
# 8. Use environment-specific .env files (.env.production, .env.staging)

# ============================================
# GENERATING SECURE KEYS
# ============================================
# JWT Secret:     openssl rand -hex 32
# NextAuth:       openssl rand -base64 32
# DB Password:    openssl rand -base64 24
# Generic Secret: openssl rand -hex 16
